% !TEX root = ../seapp-manual.tex

% Chapter 1 - Build SEA++


\chapter{Build SEA++}
\label{ch:build-seapp}

SEA ++ is based on many components and makes use of multiple programming languages.
In particular SEA++:
%
\begin{itemize}
\item is written in C++11 and Python 2.7.6;
\item extends INET 2.6, which is based on OMNeT++ 4.x;
\item requires the \texttt{libxml} library;
\end{itemize}

SEA++ is designed for Linux distributions based on Debian and it was not tested on other OSs.
It is fully compatible with Ubuntu 14.04 LTS, but it is possible using it on older versions by adopting several shrewdnesses.


\section{Build SEA++ on Ubuntu 14.04 LTS}
% \texttt{pthread} and \texttt{boost}.
The steps to build SEA++ are the following:
%
\begin{enumerate}
\item get and install \texttt{libxml} library;
\item get and build OMNeT++ 4.x (preferibly 4.6 or greater);
\item get and build SEA++.
\end{enumerate}
%
 If errors occur during the installation of some component, it should refer to official guide:
%
\begin{itemize}
\item \texttt{libxml} - \url{http://www.xmlsoft.org}
\item OMNeT++ - \url{http://omnetpp.org}
\item SEA++ - \url{https://github.com/seapp/src/archive/v0.99.tar.gz}
\end{itemize}



\subsection{Get and install \texttt{libxml} library}
The \texttt{libxml} library can be installed by using the \texttt{apt-get}:
%
\begin{lstlisting}[language={terminal}]
@~$@ sudo apt-get install libxml++2.6-dev libxml++2.6-doc
\end{lstlisting}

The \texttt{libxml} library sources are available at \url{http://libxmlplusplus.sourceforge.net/}.



\subsection{Get and build OMNET++}
To get OMNeT++ 4.6 open your terminal, go in your home and type:
%
\begin{lstlisting}[language={terminal}]
@~$@ wget http://omnetpp.org/omnetpp/send/30-omnet-releases/2290-omnet-4-6-source-ide-tgz
\end{lstlisting}
%
When the download finishes, untar and unzip the source files in your home:
%
\begin{lstlisting}[language={terminal}]
@~$@ tar xvfz 2290-omnet-4-6-source-ide-tgz
\end{lstlisting}
%
It creates the directory \texttt{omnetpp-4.6}.

Set environment variables (assuming you are using bash as your shell):
%
\begin{lstlisting}[language={terminal}]
@~$@ export PATH=$PATH:~/omnetpp-4.6/bin
@~$@ export LD_LIBRARY_PATH=~/omnetpp-4.6/lib
\end{lstlisting}
%
Append the above commands to the \texttt{.bash\_profile} file.

It is now possible to build OMNeT++:
%
\begin{lstlisting}[language={terminal}]
@~$@ cd omnetpp-4.6/
@~/omnetpp-4.6$@ NO_TCL=1 ./configure
@~/omnetpp-4.6$@ make
\end{lstlisting}



\subsection{Get and build SEA++}
To get SEA++ open your terminal, go in your home and type:
%
\begin{lstlisting}[language={terminal}]
@~$@ wget https://github.com/seapp/src/archive/master.zip
\end{lstlisting}
%
When the download finishes, unzip and rename the source directory in your home:
%
\begin{lstlisting}[language={terminal}]
@~$@ unzip master.zip
@~$@ mv src-master seapp-0.99
\end{lstlisting}
%
It creates the directory \texttt{seapp-0.99}.

It is now possible to build SEA++:
%
\begin{lstlisting}[language={terminal}]
@~$@ cd seapp-0.99/
@~/seapp-0.99$@ make makefiles
@~/seapp-0.99$@ make
\end{lstlisting}

The \texttt{seapp-0.99} directory on your home should contain the following subdirectories:
%
\begin{description}[noitemsep]
\item[] {\makebox[6cm][l]{\texttt{\textbf{seapp/}}} SEA++ root directory}
	\item[] {\makebox[6cm][l]{\quad\texttt{\textbf{interpreter/}}} ASL interpreter}
	\item[] {\makebox[6cm][l]{\quad\texttt{\textbf{src/}}} sources}
		\item[] {\makebox[6cm][l]{\quad\quad\texttt{\textbf{actions/}}} action classes}
			\item[] {\makebox[6cm][l]{\quad\quad\quad\texttt{\textbf{actionbase/}}} action base class}
			\item[] {\makebox[6cm][l]{\quad\quad\quad\texttt{\textbf{change/}}} change class}
			\item[] {\makebox[6cm][l]{\quad\quad\quad\texttt{\textbf{clone/}}} clone class}
			\item[] {\makebox[6cm][l]{\quad\quad\quad\texttt{\textbf{create/}}} create class}
			\item[] {\makebox[6cm][l]{\quad\quad\quad\texttt{\textbf{destroy/}}} destroy class}
			\item[] {\makebox[6cm][l]{\quad\quad\quad\texttt{\textbf{drop/}}} drop class}
			\item[] {\makebox[6cm][l]{\quad\quad\quad\texttt{\textbf{move/}}} move class}
			\item[] {\makebox[6cm][l]{\quad\quad\quad\texttt{\textbf{put/}}} put class}
			\item[] {\makebox[6cm][l]{\quad\quad\quad\texttt{\textbf{retrieve/}}} retrieve class}
			\item[] {\makebox[6cm][l]{\quad\quad\quad\texttt{\textbf{seappexpression/}}} seappexpression class}
			\item[] {\makebox[6cm][l]{\quad\quad\quad\texttt{\textbf{send/}}} send class}
		\item[] {\makebox[6cm][l]{\quad\quad\texttt{\textbf{attacks/}}} attack classes}
			\item[] {\makebox[6cm][l]{\quad\quad\quad\texttt{\textbf{attackbase/}}} attack base class}
			\item[] {\makebox[6cm][l]{\quad\quad\quad\texttt{\textbf{attackentry/}}} attack entry class}
			\item[] {\makebox[6cm][l]{\quad\quad\quad\texttt{\textbf{physicalattack/}}} physical attack class}
			\item[] {\makebox[6cm][l]{\quad\quad\quad\texttt{\textbf{conditionalattack/}}} conditional attack class}
			\item[] {\makebox[6cm][l]{\quad\quad\quad\texttt{\textbf{unconditionalattack/}}} unconditional attack class}
		\item[] {\makebox[6cm][l]{\quad\quad\texttt{\textbf{globalfilter/}}} globalfilter class}
		\item[] {\makebox[6cm][l]{\quad\quad\texttt{\textbf{localfilter/}}} localfilter class}
		\item[] {\makebox[6cm][l]{\quad\quad\texttt{\textbf{parser/}}} parser class}
		\item[] {\makebox[6cm][l]{\quad\quad\texttt{\textbf{variable/}}} variable class}
		\item[] {\makebox[6cm][l]{\quad\quad\texttt{\textbf{.../}}} standard INET classes}
	\item[] {\makebox[6cm][l]{\quad\texttt{\textbf{examples/}}} examples ready to use}
	\item[] {\makebox[6cm][l]{\quad\texttt{\textbf{.../}}} standard INET classes}
\end{description}



\section{Build SEA++ on older Ubuntu versions}
To build SEA++ on older Ubuntu versions, in addition to the steps described above you may need to:
%
\begin{itemize}
\item upgrade the Python interpreter;
\item upgrade the C++ compiler;
\item change SEA++ makefile;
\item change OMNeT++ configure file.
\end{itemize}

\subsection{Upgrade Python interpreter}
SEA++ uses features provided by Python 2.7.6, so it is necessary to install at least this version of its interpreter.

\subsection{Upgrade C++ compiler}
SEA++ uses features provided by C++11. It is necessary to install at least the version 4.7 of gcc/g++ compilers and set them as default.


\subsection{Link libraries in SEA++ makefile}
SEA++ is built and checked for Debian Linux Distributions and not for other OSs. It is necessary to check if libraries used by SEA++ are linked to the correct paths. After downloading SEA++, in the initial makefile, all the links to the libraries are under \texttt{-l/usr/lib/x86\_64-linux-gnu/*} path.

You may need to change the path to \texttt{-l/usr/lib/i386-linux-gnu/*}.


\subsection{Change CFLAGS in OMNeT++ configure file}
SEA++ is based on INET and the \texttt{opp\_makemake} tool of OMNeT++ is used in order to compile the framework. The file \texttt{configure.user} is the one where all the necessary parameters (compilers, flags, etc) are declared. To enable the features provided by C++11 you have to declare the option \texttt{'-std=c++11'} in the flag CFLAGS of OMNeT++'s \texttt{configure.user} file.



